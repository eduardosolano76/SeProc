<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inicio de Sesión</title>

  <style>
    :root{
      --bg: #f6efe6;
      --card: #fbf6ee;
      --accent: #c66a00;
      --text: #1a1a1a;
    }
    *{ box-sizing: border-box; }

    body{
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);

      /* ✅ Fondo a pantalla completa */
      background: url("/assets/fondo-login.png") center / cover no-repeat fixed;

      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(16px, 4vw, 32px);
    }

    /* ✅ Capa clara encima del fondo para que se lea el login */
    body::before{
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,.05); /* sube a .40 si quieres más claro */
      pointer-events: none;
      z-index: 0;
    }

    /* ✅ Contenido arriba del fondo */
    .page{
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 980px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .logo-badge{
      width: clamp(110px, 18vw, 150px);
      height: clamp(110px, 18vw, 150px);
      border-radius: 50%;
      background: #fff;
      border: 6px solid #fff;
      outline: 4px solid rgba(198,106,0,.35);
      box-shadow: 0 10px 26px rgba(0,0,0,.12);
      overflow: hidden;
      display: grid;
      place-items: center;
      margin-bottom: 0px;
    }
    .logo-img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    h1{
      font-size: clamp(22px, 3vw, 34px);
      margin: 0px 0 10px;
      text-align: center;
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    .card{
      width: min(420px, 92vw);
      background: var(--card);
      border: 8px solid var(--accent);
      border-radius: 22px;
      padding: clamp(18px, 4vw, 28px) clamp(16px, 4vw, 26px) clamp(18px, 4vw, 30px);
      box-shadow: 0 8px 28px rgba(0,0,0,.08);
      backdrop-filter: blur(2px);
    }

    .field{
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 18px;
    }
    label{ font-size: 13px; font-weight: 700; }

    input{
      height: 40px;
      border-radius: 999px;
      border: 1px solid #ead8c3;
      background: #fff;
      padding: 0 14px;
      outline: none;
      transition: border-color .15s, box-shadow .15s;
    }
    input:focus{
      border-color: rgba(198,106,0,.65);
      box-shadow: 0 0 0 3px rgba(198,106,0,.15);
    }

    .btn{
      width: 100%;
      height: 46px;
      border: none;
      border-radius: 999px;
      background: var(--accent);
      color: #fff;
      font-weight: 800;
      cursor: pointer;
      margin-top: 10px;
      transition: transform .06s ease, filter .15s ease;
    }
    .btn:hover{ filter: brightness(1.03); }
    .btn:active{ transform: translateY(1px); }

    .msg{
      margin: 10px 0 0;
      font-size: 13px;
      font-weight: 700;
    }
    .err{ color: #b00020; }
    .ok{ color: #0b6b2f; }

    /* ✅ Fix para iPhone (Safari) con altura dinámica del viewport */
    @supports (height: 100dvh) {
      body { min-height: 100dvh; }
    }
  </style>
</head>

<body>
  <main class="page">
    <div class="logo-badge">
      <!-- Logo en: src/main/resources/static/assets/logo.jpg -->
      <img class="logo-img" th:src="@{/assets/logo.jpg}" alt="Logo">
    </div>

    <h1>Inicio de Sesión</h1>

    <section class="card" aria-label="Formulario de inicio de sesión">

      <!-- Mensajes opcionales -->
      <p class="msg err" th:if="${param.error}">Usuario o contraseña incorrectos.</p>
      <p class="msg ok" th:if="${param.logout}">Sesión cerrada correctamente.</p>

      <form th:action="@{/login}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <div class="field">
          <label for="username">Nombre de usuario</label>
          <input id="username" name="username" type="text" autocomplete="username" required />
        </div>

        <div class="field">
          <label for="password">Contraseña</label>
          <input id="password" name="password" type="password" autocomplete="current-password" required />
        </div>

        <button class="btn" type="submit">Iniciar sesión</button>
      </form>
    </section>
  </main>
</body>
</html>
